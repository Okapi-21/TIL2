## 掲示板詳細機能の追加

### 実装概要

- 詳細ページの動線用意
  - Board/index.blade.php の編集
  - Board/show.blade.php の生成・編集
  - Boardcontroller の編集
- コメント投稿機能
  - モデルやマイグレーションファイルの作成
    - DB上にFactorybotを用意
  - モデル間でのリレーションの整理
- ルーティング
  - Comment コントローラーの生成・編集
  - view画面の編集

###  実践ポイント

#### 詳細画面移動のためのページリンク生成コード

```
<a href="{{ route('boards.show', $board->id) }}">
```

　これにより、BoardControlerのshowアクションへの動的なリンクが生成され、特定の掲示板情報の詳細ページにアクセスすることが可能になる。例えば、$board->id が 1 の場合は「/boards/1」をURLとするリンクが生成される。



マイグレーションファイル

```
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::create('comments', function (Blueprint $table) {
            $table->id();
            $table->string('body'); 
            $table->foreignId('user_id')->constrained()->onDelete('cascade');
            $table->foreignId('board_id')->constrained()->onDelete('cascade');
            $table->timestamps();
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down()
    {
        Schema::dropIfExists('comments');
    }
};

```



モデルファイル

```
<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class Comment extends Model
{
    use HasFactory;

    protected $fillable = ['body', 'user_id', 'board_id'];
    
    public function user()
    {
        return $this->belongsTo(User::class);
    }

    
    public function board()
    {
        return $this->belongsTo(Board::class);
    }
}
```



ファクトリーファイル

```
<?php

namespace Database\Factories;

use Illuminate\Database\Eloquent\Factories\Factory;

/**
 * @extends \Illuminate\Database\Eloquent\Factories\Factory<\App\Models\comment>
 */
class CommentFactory extends Factory
{
    /**
     * Define the model's default state.
     *
     * @return array<string, mixed>
     */
    public function definition(): array
    {
        return [
            'body' => $this->faker->sentence, // ランダムな文章
        ];
    }
}

```





